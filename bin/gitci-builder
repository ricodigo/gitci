#!/usr/bin/env ruby

require File.expand_path("../../lib/gitci", __FILE__)


BuildTask.order_by(:created_at.asc).where(:performed => false).each do |task|
  puts ">> Running `#{task.command}`..."

  begin
    task.perform!
  rescue => e
    puts "Error running task #{task.id}:"
    puts e.message
    puts e.backtrace.join("\t\n")
  end
end

